<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="animate.css">
<script src="zepto.js"></script>
<style type="text/css">
	blockquote,body,button,dd,dl,dt,fieldset,form,h1,h2,h3,h4,h4,h5,h6,hr,input,legend,li,ol,p,pre,td,textarea,th,ul,img{
		margin: 0;
		padding: 0;
	}
	body{background-color: black;}
	ul{list-style: none;}
	li{float:left;width: 100px;height: 100px;}
	.large{width: 100%;height: 100%;position: absolute;top:0px;background-color: black;}
</style>

</head>

<body id="con">
<ul class="img-container" id="container">
	

</ul>
<div class="large" id="large-cont">
	<img id="large_img">
</div>
<script>
	var total=5;
	var zwin=$(window);
	var render=function (){
		var padding=2;
		var winwidth=zwin.width();
		var picwidth=Math.floor((winwidth-padding*3)/4);
		var tmpl="";
		for (var i = 1; i <=total; i++) {
			var p=padding;
			var imgsrc=i+".jpg";
			if (i%4==1) {p=0;};
			tmpl+='<li data-id="'+i+'" class="animated bounceIn" style="width:'+picwidth+'px;height:'+picwidth+'px;padding-left:'+p+'px;padding-top:'+p+'px"><img src="'+imgsrc+'"/><canvas id="cvs_'+i+'"></canvas></li>';
			var imageObj=new Image();
			imageObj.index=i;
			imageObj.onload=function(){
				var cvs=$('#cvs_'+this.index)[0].getContext('2d');
				cvs.width=this.width;
				cvs.height=this.height;
				cvs.drawImage(this,0,0);
			}
			imageObj.src=imgsrc;
	}
	$('#container').html(tmpl);
}
render();
var loadImg=function(id){
&('#large_container').css({
	width:zWin.width(),
	height:zWin.height()
}).show();
var imgsrc="'+id+'.large.jpg";
}
$ ('container').delegate('li','tap',function(){
	var _id=$(this).attr('data-id');
	loadImg(_id);

})
</script>
</body>
</html>